<div class="main-container">
  <div class="container d-flex justify-content-center mt-5">
    <div class="col-md-6 col-lg-4">
      <div class="bg-image hover-overlay ripple">
        <a href="#" target="_blank">
          <img src="assets/reservafacil.png" alt="Reserva Fácil" class="img-fluid" />
        </a>
      </div>

      <!-- Formulário para Gerenciar Reserva -->
      <div class="form-outline mb-4">
        <input type="number" [(ngModel)]="reservaId" id="reservaIdInput" class="form-control" placeholder=" " required />
        <label class="floating-label" for="reservaIdInput">ID da Reserva</label>
      </div>

      <!-- Botões de Ação -->
      <button type="button" class="btn btn-info btn-block mb-2" (click)="verDetalhes()">Ver Detalhes</button>
      <button type="button" class="btn btn-primary btn-block mb-2" (click)="editarReserva()">Alterar reserva</button>
      <button type="button" class="btn btn-danger btn-block mb-2" (click)="excluirReserva()">Excluir</button>
      <button type="button" class="btn btn-secondary btn-block mb-4" (click)="listarReservas()">Listar Todas</button>

      <!-- Mensagem de Carregamento -->
      <div *ngIf="isLoading" class="d-flex justify-content-center mb-4">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Carregando...</span>
        </div>
      </div>
    </div>
  </div>


  <div *ngIf="showEditModal" class="modal-overlay">
    <div class="modal-content">
      <h5>Editar Reserva</h5>


      <div class="form-outline mb-3">
        <label class="floating-label" for="hospedeSelect">Selecionar Hóspede</label>
        <select [(ngModel)]="editForm.hospede.id" id="hospedeSelect" class="form-control" required>
          <option *ngFor="let hospede of hospedes" [value]="hospede.id">{{ hospede.nome }}</option>
        </select>
      </div>


      <div class="form-outline mb-3">
        <label class="floating-label" for="nomeUsuario">Nome do Usuário</label>
        <input type="text" [(ngModel)]="editForm.nomeUsuario" id="nomeUsuario" class="form-control" />
      </div>


      <div class="form-outline mb-3">
        <label class="floating-label" for="email">E-mail</label>
        <input type="email" [(ngModel)]="editForm.email" id="email" class="form-control" />
      </div>


      <div class="form-outline mb-3">
        <label class="floating-label" for="hotelSelect">Selecionar Hotel</label>
        <select [(ngModel)]="editForm.hotel.id" id="hotelSelect" class="form-control" required>
          <option *ngFor="let hotel of hoteis" [value]="hotel.id">{{ hotel.nome }}</option>
        </select>
      </div>


      <div class="form-outline mb-3">
        <label class="floating-label" for="quartoSelect">Selecionar Quarto</label>
        <select [(ngModel)]="editForm.quarto.id" id="quartoSelect" class="form-control" required>
          <option *ngFor="let quarto of quartos" [value]="quarto.id">{{ quarto.numero }}</option>
        </select>
      </div>


      <div class="form-outline mb-3">
        <label class="floating-label" for="dataCheckIn">Data Check-in</label>
        <input type="date" [(ngModel)]="editForm.dataCheckIn" id="dataCheckIn" class="form-control" />
      </div>


      <div class="form-outline mb-3">
        <label class="floating-label" for="dataCheckOut">Data Check-out</label>
        <input type="date" [(ngModel)]="editForm.dataCheckOut" id="dataCheckOut" class="form-control" />
      </div>

 
      <div class="form-outline mb-3">
        <label class="floating-label" for="numHospedes">Número de Hóspedes</label>
        <input type="number" [(ngModel)]="editForm.numHospedes" id="numHospedes" class="form-control" />
      </div>


      <div class="form-outline mb-3">
        <label class="floating-label" for="status">Status</label>
        <input type="text" [(ngModel)]="editForm.status" id="status" class="form-control" />
      </div>


      <button type="button" class="btn btn-success btn-block" (click)="salvarEdicao()">Salvar Alterações</button>
      <button type="button" class="btn btn-secondary btn-block" (click)="fecharModal()">Fechar</button>
    </div>
  </div>


  <div *ngIf="showDetailsModal" class="modal-overlay">
    <div class="modal-content">
      <h5>Detalhes da Reserva</h5>
      <p><strong>Nome do Usuário:</strong> {{ obterNomeHospede(reservaSelecionada?.hospedeId) }}</p>
      <p><strong>E-mail:</strong> {{ obterEmailHospede(reservaSelecionada?.hospedeId) }}</p>
      <p><strong>Hotel:</strong> {{ obterNomeHotel(reservaSelecionada?.hotelId) }}</p>
      <p><strong>Quarto:</strong> {{ obterNumeroQuarto(reservaSelecionada?.quartoId) }}</p>
      <p><strong>Data Check-in:</strong> {{ reservaSelecionada?.dataCheckIn }}</p>
      <p><strong>Data Check-out:</strong> {{ reservaSelecionada?.dataCheckOut }}</p>
      <p><strong>Número de Hóspedes:</strong> {{ reservaSelecionada?.numHospedes }}</p>
      <p><strong>Status:</strong> {{ reservaSelecionada?.status }}</p>
      <button type="button" class="btn btn-secondary btn-block" (click)="fecharModal()">Fechar</button>
    </div>
  </div>


  <div *ngIf="showListAllModal" class="modal-overlay">
    <div class="modal-content">
      <h5>Lista de Todas as Reservas</h5>
      <div *ngFor="let reserva of reservas">
        <p>
          <strong>ID:</strong> {{ reserva.id }} -
          <strong>Nome do Usuário:</strong> {{ obterNomeHospede(reserva.hospedeId) }} -
          <strong>Hotel:</strong> {{ obterNomeHotel(reserva.hotelId) }} -
          <strong>Quarto:</strong> {{ obterNumeroQuarto(reserva.quartoId) }} -
          <strong>Data Check-in:</strong> {{ reserva.dataCheckIn }} -
          <strong>Data Check-out:</strong> {{ reserva.dataCheckOut }} -
          <strong>Número de Hóspedes:</strong> {{ reserva.numHospedes }} -
          <strong>Status:</strong> {{ reserva.status }}
        </p>
      </div>
      <button type="button" class="btn btn-secondary btn-block" (click)="fecharModal()">Fechar</button>
    </div>
  </div>

  <footer class="footer">
    © 2024 Reserva Fácil. Todos os direitos reservados.
  </footer>
</div>
